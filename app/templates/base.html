<!doctype html>

<html lang="en">
    <head>
        <title>Control your own TARDIS</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
    </head>

    <body>
        <div class="container p-1 my-1 bg-primary text-white" >
            <h1 class="text-center mt-4">Your TARDIS</h1>
            <h4>Doctor: {{ form.tardis_doctor }} </h4>
            <!-- <h4>TARDIS Color: {{ form.tardis_color }}</h4> -->
        </div>

        <div class="container p-2 my-2 bg-primary text-white" >
            <h5 class="text-center">Front Window </h5>        
            <div class="container border bg-light text-dark">
                <!-- Row - controls -->
                <div class="row justify-content-center bg-light test-dark">
                    <div class="col" align="center">
                        <label for="front-window-color" class="col-form-label">Color</label>
                        <input  type="color" 
                                class="form-control form-control-color" 
                                id="front-window-color" 
                                value="#563d7c" 
                                title="Choose your color">
                </div>
                    <div class="col" align="center">          
                        <label for="front-window-brightness" class="form-label">Brightness</label>
                        <input  type="range" 
                                class="form-range" 
                                min="0"
                                max="100"
                                value=22
                                id="front-window-brightness">
                    </div>
                </div>
            </div>
            
        </div>
        <div class="container p-2 my-2 bg-primary text-white" >
            <h5 class="text-center">Rear Window </h5>        
            <div class="container border bg-light text-dark">
                <!-- Row - controls -->
                <div class="row justify-content-center bg-light test-dark">
                    <div class="col" align="center">
                        <label for="rear-window-color" class="col-form-label">Color</label>
                        <input  type="color" 
                                class="form-control form-control-color" 
                                id="rear-window-color" 
                                value="#563d7c" 
                                title="Choose your color">
                    </div>
                    <div class="col" align="center">          
                        <label for="rear-window-brightness" class="form-label">Brightness</label>
                        <input  type="range" 
                                class="form-range" 
                                id="rear-window-brightness">
                    </div>
                </div>
            </div>
            
        </div>


    </body>

    <script>
        // Add an event listener to the color input to detect changes
        document.getElementById('front-window-color').addEventListener('change', function(event) {
            // Get the selected color value
            var selectedColor = event.target.value;
            // console.log("Setting color:", selectedColor);
            // Send an asynchronous POST request to the server
            fetch('/window/front/update_color', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: 'color=' + encodeURIComponent(selectedColor),
            })
            .then(response => response.json())
            .then(data => {
                console.log(data);
            })
            .catch(error => {
                console.error('Error:', error);
            });
        });
    </script>

    <script>
      document.getElementById('front-window-brightness').addEventListener('input', function(event) {
            // Get the selected brightness value
            var selectedBrightness = event.target.value;
            // console.log("Changing rightness:", selectedBrightness);
            // Send an asynchronous POST request to the server
            fetch('/window/front/update_brightness', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: 'selectedBrightness=' + encodeURIComponent(selectedBrightness),
            })
            .then(response => response.json())
            .then(data => {
                console.log(data);
            })
            .catch(error => {
                console.error('Error:', error);
            });
        });

      </script>

    </html>